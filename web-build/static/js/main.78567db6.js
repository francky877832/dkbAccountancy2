(()=>{"use strict";var e={5350:(e,t,n)=>{n.r(t),n.d(t,{default:()=>lt});var o=n(5442),r=n(8148),i=n(4304),a=n(4854),s=n(7810),l=n(7232),d=n(2928),c=n(6690),u=n(6193),f=n(4222),p=n(5664);const h=p.default.get("window"),g=h.width,x=(h.height,"#F0F0F0"),m="blue",y="rgba(242, 122, 26, 0.1)",j="#fff",C="#ccc",b="#777",w="#444",S="gray",v="red",I="rgb(32, 137, 220)",T="green",k="orange",E="#fff",P="rgba(0, 0, 0, 0.2)",B="rgba(0, 0, 0, 0.9)",F="rgba(0, 0, 0, 0.7)",z="rgba(0, 0, 0, 0.3)",O="rgba(245, 245, 245, 1)",A="rgba(19, 243, 19, 0.25)",D="rgba(249, 28, 19, 0.25)",L={mainFontFamily:void 0,secondaryFontFamily1:"Arial",secondaryFontFamily2:"Georgia",secondaryFontFamily3:void 0,secondaryFontFamily4:"Courier"},R={text:{fontFamily:L.mainFontFamily,fontSize:14,color:B}},_={fontSize:16,color:w,fontFamily:L.mainFontFamily,fontWeight:"bold"},V={text:{color:v}},W=p.default.get("window").width,N=W/2-5-10,U=o.default.create({container:{backgroundColor:j,width:N,marginHorizontal:5,marginVertical:5,paddingBottom:5},containerVisibility:{position:"absolute",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",backgroundColor:S,opacity:.5,zIndex:999},containerVisibilityInfo:{justifyContent:"center",alignItems:"center",position:"absolute",left:0,right:0,bottom:0,padding:10,zIndex:1e4,backgroundColor:w,opacity:1},containerHorizontal:{backgroundColor:j,width:W/2,marginHorizontal:5,marginVertical:5,paddingBottom:5},imageHorizontal:{width:"100%",borderRadius:0},pressable:{flex:1},image:{width:"100%",height:1.2*N,borderRadius:0},text:{paddingHorizontal:10,paddingVertical:5},shopName:{fontWeight:"bold",fontStyle:"italic",fontFamily:L.mainFontFamily,color:"gray"},productName:{fontStyle:"normal",fontFamily:L.mainFontFamily,color:w,alignSelf:"center",fontSize:15},price:{color:m,fontWeight:"bold"},top:{height:25,width:"100%",position:"absolute",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:2,left:0,right:0,zIndex:100,backgroundColor:P},bottom:{top:5,borderRadius:0,padding:5,borderWidth:1,borderColor:m,flexDirection:"row",justifyContent:"center"},category:{fontSize:14,fontWeight:"bold",fontStyle:"normal",fontFamily:L.mainFontFamily,color:m},feesBy:{flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:w,paddingRight:4},bottomIcons:{flexDirection:"row",justifyContent:"center",alignItems:"center"},bottomIconsButton:{justifyContent:"center",alignItems:"center",paddingHorizontal:2,flexWrap:"wrap",width:52},card:{borderRadius:8,shadowColor:O,shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:8,elevation:5},isBasketPresent:{backgroundColor:w,borderColor:P},isBasketPresentText:{color:E}}),M={position:"relative",justifyContent:"center",alignSelf:"center",left:0,right:0,backgroundColor:E,paddingHorizontal:30,zIndex:100,shadowColor:B,shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:5,elevation:10,borderRadius:10,paddingVertical:30},H=o.default.create({container:{flex:1,backgroundColor:O,justifyContent:"center"},backgroundImage:{flex:1,resizeMode:"cover",alignItems:"center"},cover:{position:"absolute",flex:1,left:0,right:0,top:0,bottom:0,backgroundColor:z,zIndex:99},registerOrLogin:{flexDirection:"row"},credentialGroup:{flexDirection:"row",justifyContent:"space-around",width:"100%"},pressable:{paddingVertical:15,borderRadius:20,bottom:10},infoContainer:Object.assign({},M,{position:"absolute"}),credentialContainers:{},forgotBox:{flexDirection:"row",justifyContent:"flex-end"},forgotText:{textDecorationLine:"underline",color:I},titleBox:{left:20},title:Object.assign({},R.text,{color:E,fontSize:30,fontWeight:"bold"}),inputContainer:{},inputFocused:{borderColor:m},input:Object.assign({},R.text,{fontSize:16,left:10})}),$=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},menu:{flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center"},menuItem:{},menuItemText:{fontWeight:"bold",fontSize:15,color:I},logoBox:{height:300,width:"100%",justifyContent:"center",alignItems:"center"},logoImage:{height:"100%",width:"90%"},infoContainer:Object.assign({},M,{justifyContent:"center",alignItems:"center",width:"100%"}),menuButton:{padding:20,borderRadius:10,borderWidth:1,borderColor:O,width:"100%",alignItems:"center",marginTop:5,backgroundColor:I},menuText:{fontWeight:"bold",fontSize:16,color:E}});var q=n(9612),G=(n(3803),n(1560),n(2043)),J=n.n(G);n(6857);const K=e=>{let t=[],n=(e=e||"").toString().split(""),o=[];for(let r=n.length-1;r>=0;r--)"."!=n[r]&&o.push(n[r]);for(let r in o)"."!=o[r]&&t.push(o[r]),(r+1)%3==0&&r!=o.length-1&&t.push(".");return t.reverse().join("")},X=e=>{switch(e){case"auth/invalid-email":return"L'adresse e-mail est invalide.";case"auth/user-disabled":return"Ce compte a \xe9t\xe9 d\xe9sactiv\xe9.";case"auth/user-not-found":return"Aucun utilisateur trouv\xe9 avec cette adresse e-mail.";case"auth/wrong-password":return"Le mot de passe est incorrect.";case"auth/too-many-requests":return"Trop de tentatives de connexion. R\xe9essayez plus tard.  Si vous ne voulez pas attendre r\xe9initialisez votre mot de passe.";default:return"Une erreur inconnue s'est produite. Veuillez r\xe9essayer."}},Y=()=>{const e=new Date,t=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}/${t}/${String(e.getFullYear()).slice(-2)}`},Q=e=>3===e.split("/").length,Z=e=>{J().fire({title:e.title,text:e.text,icon:e.icon,showCancelButton:!0,confirmButtonText:"Ok",cancelButtonText:"No"}).then((t=>{t.isConfirmed?e.action():"function"==typeof e.refuseAction?e.refuseAction():e.action()}))},ee="https://dkbbackend.onrender.com";var te=n(7308);n(9620);var ne=n(4922);const oe=(0,s.createContext)(),re=({children:e})=>{const[t,n]=(0,s.useState)(!1),[o,r]=(0,s.useState)({_id:"66feb4217fa2c43a7e8d76d9",username:"dkb61"}),[i,a]=(0,s.useState)([]),[l,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(""),[f,p]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),[x,m]=(0,s.useState)({}),y={temporaryAddress:x,refreshComponent:t,email:c,username:f,password:h,user:o,isAuthenticated:l},j={setTemporaryAddress:m,setRefreshComponent:n,setEmail:u,setUsername:p,setPassword:g,setUser:r,setIsAuthenticated:d},C={getUserAccounters:async()=>{try{const e=await fetch(`${ee}/api/auth/accountancies/get`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e){const t=await e.text();throw new Error(t.message)}const t=await e.json();return a(t.datas),t.datas}catch(e){return console.log(e),[]}},getUser:async e=>{try{const t=await fetch(`${ee}/api/auth/users/get/${encodeURI(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t)throw new Error("Cet email ne'existe pas "+await t.text());await t.json();return!0}catch(t){return console.log(t),!1}},updateUser:async(e,t)=>{try{const n=await fetch(`${ee}/api/auth/users/update/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"multipart/form-data"},body:t});if(!n.ok){const e=await n.json();return void console.error("Erreur lors de la mise \xe0 jour de l'utilisateur:",e.message)}const o=await n.json();return o.success,o.user}catch(n){console.error("Erreur lors de la requ\xeate:",n)}},checkEmail:e=>{},checkPassword:e=>{},checkUsername:e=>{},signupUserWithEmailAndPassword:async(e,t,n,o,r,i)=>{const a={email:e,password:n,adminPassword:o,role:r,location:i};try{const e=await fetch(`${ee}/api/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw new Error("Erreur lors de l\u2019inscription"+await e.text());const t=await e.json();console.log("Inscription r\xe9ussie:",t)}catch(s){console.error("Erreur:",s)}},loginUserWithEmailAndPassword:async(e,t,n,o)=>{const i={email:e,username:t,password:n,type:o};try{const e=new URLSearchParams(i).toString(),t=await fetch(`${ee}/api/auth/login?${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const e=await t.json(),n=(e.token,e.user);return console.log(n),r(n),d(!0),n}throw new Error((await t.json()).error)}catch(a){return console.log(a),d(!1),!1}}};return(0,ne.jsx)(oe.Provider,{value:Object.assign({},y,j,C),children:e})},ie=e=>{const t=(0,q.useNavigation)(),{user:o}=((0,q.useRoute)(),(0,s.useContext)(oe)),r=["admin","boss","visualizer"],i=["admin","cashier","supplier","auto-supplier"],a=["admin","boss","supplier","auto-supplier"];return(0,ne.jsxs)(d.default,{style:[$.container],children:[(0,ne.jsxs)(d.default,{style:[$.menu],children:[["boss","admin"].includes(o?.role)&&(0,ne.jsx)(u.default,{style:[$.menuItem],onPress:()=>{t.navigate("UserLogin",{page:"register"})},children:(0,ne.jsx)(c.default,{style:[R.text,$.menuItemText],children:"Sign Up"})}),(0,ne.jsx)(d.default,{style:{width:10}}),(0,ne.jsx)(u.default,{style:[$.menuItem],onPress:()=>{t.navigate("UserLogin",{page:"login"})},children:(0,ne.jsx)(c.default,{style:[R.text,$.menuItemText],children:"Logout"})})]}),(0,ne.jsx)(d.default,{style:{height:5}}),(0,ne.jsxs)(d.default,{style:[$.menu],children:[(0,ne.jsx)(u.default,{children:(0,ne.jsx)(c.default,{style:[R.text,$.menuItemText,{fontSize:20}],children:"Balance : "})}),(0,ne.jsx)(u.default,{children:(0,ne.jsxs)(c.default,{style:[R.text,$.menuItemText,{fontSize:20,fontWeight:"bold",color:o.cashBalance<0?"red":T}],children:[o.cashBalance," XAF"]})})]}),(0,ne.jsx)(d.default,{style:{height:10}}),(0,ne.jsx)(d.default,{style:[$.logoBox],children:(0,ne.jsx)(f.default,{source:n(6797),style:[$.logoImage]})}),(0,ne.jsx)(d.default,{style:{height:10}}),(0,ne.jsxs)(d.default,{style:[$.infoContainer],children:[(0,ne.jsx)(u.default,{style:[$.menuButton,{backgroundColor:r.includes(o.role)?I:w}],onPress:()=>{r.includes(o.role)&&t.navigate("ViewAccountancies")},children:(0,ne.jsx)(c.default,{style:[R.text,$.menuText],children:"Visualiser"})}),(0,ne.jsx)(u.default,{style:[$.menuButton,{backgroundColor:i.includes(o.role)?I:w}],onPress:()=>{i.includes(o.role)&&t.navigate("AddAccountancy")},children:(0,ne.jsx)(c.default,{style:[R.text,$.menuText],children:"Ajouter"})}),(0,ne.jsx)(u.default,{style:[$.menuButton,{backgroundColor:a.includes(o.role)?I:w}],onPress:()=>{a.includes(o.role)&&t.navigate("SupplyFunds")},children:(0,ne.jsx)(c.default,{style:[R.text,$.menuText],children:"Approvisionnement"})})]})]})};var ae=n(9700),se=n(5741),le=n(3413),de=n(334);n(6229);o.default.create({focused:{backgroundColor:y,borderRadius:25},iconContainer:{width:50,padding:5,justifyContent:"center",alignItems:"center"}});const ce=p.default.get("window"),ue=ce.width,fe=(ce.height,o.default.create({container:{backgroundColor:E,paddingHorizontal:10,paddingBottom:0},commentContainer:{backgroundColor:"red"},flatlistContainerView:{paddingBottom:10,paddingRight:10},flatlistContainer:{backgroundColor:E,paddingRight:15},flatlistContainerNotAll:{maxHeight:600},comment:{flexDirection:"row",backgroundColor:b,padding:5,marginTop:10,alignSelf:"flex-start",paddingHorizontal:10,paddingVertical:5,borderRadius:10,maxWidth:"90%",left:1},subComment:{backgroundColor:C,alignSelf:"flex-end",width:"65%",paddingHorizontal:10,paddingVertical:5,left:1},commentText:Object.assign({},R.text),sendButton:{left:5},inputContainer:{top:0},input:Object.assign({},R,_,{padding:10}),inputFocused:{borderBottomWidth:1,borderColor:m},commentProfileContainer:{width:30,height:30,borderRadius:15,justifyContent:"center",alignItems:"center",alignSelf:"flex-end",borderWidth:1,borderColor:O,zIndex:99},commentProfile:{width:30,height:30,borderRadius:15}}),{borderRadius:8,shadowColor:B,shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:8,elevation:5,borderWidth:1,borderColor:C}),pe=o.default.create({contentContainerStyle:{},container:{backgroundColor:E,zIndex:98,flex:1},topContainer:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",borderBottomWidth:1,borderBottomColor:C,backgroundColor:E,flex:1},topMostContainer:{height:110},modal:{paddingBottom:5,borderTopWidth:1,borderTopColor:C,backgroundColor:E,zIndex:100,position:"absolute",left:0,right:0,top:110,borderWidth:1,borderBottomColor:b,borderRadius:5,shadowColor:O,shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:8,elevation:5,backgroundColor:O,justifyContent:"center",alignItems:"center"},filtres:{justifyContent:"center",paddingHorizontal:5,flex:1,backgroundColor:E,zIndex:100},categoryContainer:{width:"100%",top:10,paddingBottom:25,justifyContent:"center"},orderByContainer:{flex:1,width:g,alignSelf:"center",alignItems:"center",justifyContent:"center",borderBottomWidth:1,backgroundColor:F,zIndex:101},radioBox:Object.assign({},fe,{alignItems:"flex-start",justifyContent:"center",backgroundColor:O,width:"90%",paddingHorizontal:40,paddingVertical:20,borderWidth:1,borderColor:F,borderRadius:10}),radioContainer:{flexDirection:"row",alignItems:"center",marginBottom:10},modalHeader:{paddingVertical:20},modalHeaderText:{fontSize:20,fontWeight:"bold"},similarContainer:{top:60,paddingBottom:5,backgroundColor:O},modalVisibleText:{color:m},priceContainer:{flexDirection:"column",marginTop:10,width:g,backgroundColor:O},price:{flexDirection:"row",justifyContent:"center",alignItems:"center"},minPrice:{paddingHorizontal:2,flex:1,paddingLeft:5},maxPrice:{paddingHorizontal:2,flex:1,paddingRight:5},label:{alignSelf:"center",fontSize:15,fontStyle:L.mainFontFamily},input:Object.assign({},R.text,_,{width:"100%",height:40,borderColor:C,borderWidth:1,borderRadius:5,paddingVertical:2,paddingHorizontal:20,flex:1,justifyContent:"center",backgroundColor:E}),inputFocused:{borderColor:m},conditionContainer:{flexDirection:"column",justifyContent:"space-around",marginTop:10,width:g},categorySeparator:{width:20},categoryFocused:{backgroundColor:m,borderWidth:1,borderColor:E},textCategoryFocused:{color:E},label:Object.assign({},R.text,{fontFamily:L.secondaryFontFamily3,fontWeight:"bold",color:w}),filterFlatlist:{top:10,alignSelf:"center",width:"100%"},category:{justifyContent:"center",backgroundColor:"#fff",borderWidth:1,borderColor:"#ccc",paddingVertical:5,paddingHorizontal:10,borderRadius:15,height:35},textCategory:{color:"#555",fontFamily:L.mainFontFamily,fontSize:12,fontWeight:"bold"},trierFiltrer:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:"100%"},trierFiltrerFocused:{borderTopWidth:1,borderTopColor:m},pressableFilter:{borderWidth:1,borderColor:C,padding:7,paddingHorizontal:10,borderRadius:20,flexDirection:"row"},pressableFilterFocused:{borderWidth:2,borderColor:m,backgroundColor:y},pressableFilterDisabled:{borderWidth:2,borderColor:m,backgroundColor:y},pressableFilterTextDisabled:{color:v},productContainer:{backgroundColor:O},flatlist:{backgroundColor:O}}),he=(o.default.create({container:{width:"100%",height:"100%"},buttonContainer:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:10,zIndex:100,backgroundColor:P},likeContainer:Object.assign({},pe.similarContainer,{top:20,paddingBottom:20}),getBackPosition:{bottom:60},buttonContainerLeft:{flexDirection:"row",justifyContent:"space-between"},prevButton:{color:E},likeButton:{backgroundColor:E,color:E},shareButton:{},underCaroussel:{backgroundColor:E},since:{flexDirection:"row",justifyContent:"space-between"},name:{},details:{flexDirection:"row",justifyContent:"space-between",top:15},description:{paddingTop:25,paddingBottom:20},descriptionBox:{flexDirection:"column",backgroundColor:C,padding:10,top:5,borderRadius:5,width:"100%"},infosBox:{paddingHorizontal:10,paddingTop:5},commentsContainer:{width:"100%",paddingBottom:10,backgroundColor:E,top:10,paddingTop:10},scrollView:{backgroundColor:O,width:"100%",left:0,right:0},bottom:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",position:"relative",left:0,right:0,bottom:0,backgroundColor:E,height:60,borderWidth:1,borderColor:C,paddingHorizontal:10},button:Object.assign({},U.card,{shadowColor:E,justifyContent:"center",alignItems:"center",height:50,borderRadius:5}),buttonText:{textAlign:"center",fontWeight:"bold"},price:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",paddingHorizontal:5},acheter:{flex:1,borderRadius:5},panier:{flex:1,borderRadius:5,borderWidth:1,borderColor:m,left:-5},sellerBrand:{backgroundColor:y,paddingVertical:10,paddingHorizontal:5,width:ue},likeAddersImages:{width:50,height:50,borderRadius:25},likeAdders:{backgroundColor:E,padding:10},likeTitle:{},likeContent:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center"},likeItem:{position:"relaive",justifyContent:"center",alignItems:"center"},someText:{fontWeight:"bold",fontSize:20,color:B,paddingLeft:10},color:{width:16,height:16,borderRadius:8},propositionPrice:{flexDirection:"row",justifyContent:"center",alignItems:"center",paddingVertical:10,paddingHorizontal:10,backgroundColor:B,borderTopWidth:1,borderColor:E},offerLeftText:{color:E},offerRightText:{color:E},similarContainer:Object.assign({},pe.similarContainer,{top:10,paddingLeft:1,paddingBottom:20,backgroundColor:E,flex:1}),similarTitleContainer:{paddingTop:10},similarProducts:{flex:1,top:10,backgroundColor:E}}),o.default.create({container:{flex:1,borderTopWidth:1,borderBottomWidth:1,borderTopColor:x,borderBottomColor:x,backgroundColor:E,flexDirection:"row",justifyContent:"center",alignItems:"center",paddingHorizontal:10},containerBox:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",paddingHorizontal:5,backgroundColor:E},prevButton:{top:0},inputText:Object.assign({},R.text,_,{fontSize:16,color:"#333",fontFamily:L.mainFontFamily}),inputContainer:{borderWidth:1,borderColor:O,paddingHorizontal:5,backgroundColor:E,justifyContent:"center",alignItems:"center",alignSelf:"center",borderWidth:1,borderColor:O,borderRadius:60},inputContainerFocused:{borderWidth:1,borderColor:m}})),ge=o.default.create({likeButton:{likeIcon:{width:30,height:30,alignItems:"center"}},shareButton:{container:{flex:1,flexDirection:"row",paddingHorizontal:10}},prevButton:{container:{flex:1,flexDirection:"row",paddingHorizontal:10}},customText:{container:{flex:1,flexDirection:"row",paddingHorizontal:10}},conditionChoice:{checkBox:{flexDirection:"column",justifyContent:"space-around"}},activityIndicator:{container:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:y},icon:{},activityIndicator:{width:"100%",height:"100%",alignSelf:"center",justifyContent:"center",alignContent:"center"}},modalActivityIndicator:{modalContainer:{flex:1,width:g,alignSelf:"center",alignItems:"center",justifyContent:"center",borderBottomWidth:1,backgroundColor:F,zIndex:101},modalContent:Object.assign({},fe,{alignItems:"center",justifyContent:"center",backgroundColor:O,width:"90%",paddingHorizontal:40,paddingVertical:20,borderWidth:1,borderColor:F,borderRadius:10})},counter:{container:{left:20,flexDirection:"row",alignItems:"center",justifyContent:"space-between"},containerStyleInput:{width:50,height:35,flexDirection:"row",alignItems:"center"},inputContainer:{width:30,height:25,backgroundColor:O}},priceDetails:{container:{padding:10,backgroundColor:B},title:{fontWeight:"bold",color:E},priceLine:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:5},semiTitle:{color:C},price:{fontWeight:"bold",color:E},totalPriceLine:{backgroundColor:m,padding:5},totalPriceText:{color:E,fontWeight:"bold"}},temporaryNotification:{container:{backgroundColor:F,position:"absolute",bottom:0,left:0,right:0,padding:20,justifyContent:"center",alignItems:"center"},message:{color:E}}});n(7162),n(8160);var xe=n(5715),me=n(25);const ye={USER:{ON_REGISTERED:{title:"Bienveue!!!",message:"Nous sommes heureux de vous compter parmi nous. Sur jiraShopping, Vendez ce que vous voulez gratuitement.\nTout le monde merite une seconde chance, meme votre produit.",action:"Account"}},ORDERS:{ON_NEW_ORDER:{message:"",action:""},PAYMENT_SUCCESSFUL:{message:"",action:""},PAYMENT_FAILED:{message:"",action:""},ON_ORDER_PENDING:{message:"",action:""},ON_ORDER_SHIPPED:{message:"",action:""},ON_ORDER_DELIVERED:{message:"",action:""}},OFFERS:{ON_NEW_OFFER:{message:"",action:""},ON_OFFER_RESPONSE:{ON_ACCEPTED:{message:"",action:""},ON_REFUSED:{message:"",action:""}}},PRODUCTS:{ON_NEW_LIKE:{title:"Nouveau Like",message:"Un de vos produits a re\xe7u un nouveau Like. Pr\xe9cipitez-vous pour faire une propositon.",action:"ProductDetails"},ON_NEW_COMMENT:{title:"Nouveau Commentaire",message:"Votre produit a un nouveau commentaire. Profitez-en pour s\xe9duire le client.",action:"AllComments"},ON_RESPONSE_COMMENT:{title:"Nouveau Commentaire",message:"Votre commentaire a re\xe7u a une nouvelle r\xe9ponse. Profitez-en pour s\xe9duire le client.",action:"AllComments"},ON_NEW_BASKET:{message:"",action:""},ON_DELETE_BASKET:{message:"",action:""},ON_PRODUCT_UPDATED:{title:"Produit Mis A Jour",message:"Un produit que vous suivez a ete mis a jour. Pr\xe9cipitez-vous pour placer un nouveau deal.",action:"ProductDetails"},ON_PRODUCT_CREADTED:{title:"Nouveau Produit",message:"Une boutique que vous suivez vient d'ajouter un nouveau produit. Pr\xe9cipitez-vous pour faire une offre.",action:"ProductDetails"}},ADMIN:{MISSED_YOU:{message:"",action:""},NEW_PRODUCT:{message:"",action:""},DONT_WASTE_TIME:{message:"",action:""},BE_CAREFULL:{BAD_COMMENT:{message:"",action:""},BAD_PRODUCT:{message:"",action:""}}}},je=(0,xe.createAsyncThunk)("favourites/addFavourite",(async({item:e,bool:t,user:n},{rejectWithValue:o})=>{try{let o={};const r={user:n._id,username:n.username,product:e._id};if(t?(o=await fetch(`${ee}/api/datas/favourites/update/${n._id}`,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}),o=await fetch(`${ee}/api/datas/products/likes/update/${e._id}`,{method:"PUT",body:JSON.stringify({updateLikes:1,userId:n._id}),headers:{"Content-Type":"application/json"}}),e.favourites.some((e=>e._id===n._id))||await(async({user:e,source:t,model:n,type:o,datas:r})=>{const i=ye[n],a=i[o].message,s=i[o].action,l=i[o].title,d={user:e,source:t,modele:n.toLowerCase(),type:o.toLowerCase(),message:a,action:s,read:0,title:l,datas:r};try{const t=await fetch(`${ee}/api/datas/notifications/update/${e}`,{method:"PUT",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erreur lors de la requ\xeate"+await t.text());return!0}catch(c){return console.error("Erreur","Une erreur est survenue! "+c),!1}})({user:e.seller._id,source:"app",model:"PRODUCTS",type:"ON_NEW_LIKE",datas:e._id})):(o=await fetch(`${ee}/api/datas/favourites/remove/${n._id}`,{method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}),o=await fetch(`${ee}/api/datas/products/likes/update/${e._id}`,{method:"PUT",body:JSON.stringify({updateLikes:-1,userId:n._id}),headers:{"Content-Type":"application/json"}})),!o.ok)throw new Error("Erreur lors de la requ\xeate addFavourite")}catch(r){return console.error(r),o(r.message)}})),Ce=(0,xe.createAsyncThunk)("favourites/fetchUserFavourites",(async({user:e,page:t},{getState:n,rejectWithValue:o})=>{try{const n=await fetch(`${ee}/api/datas/favourites/get/${e}?page=${t}`);if(!n.ok)throw new Error("Erreur lors de la requ\xeate Fetch favourite"+await n.text());return await n.json()}catch(r){return console.error(r),o(r.message)}})),be=(0,xe.createSlice)({name:"favourites",initialState:{favourites:[],liked:null,isLoading:!1,disableLikeButton:!1,hasMore:!0,page:1,error:null,addLike:0,modifiedProducts:[]},reducers:{addLocalFavourite(e,t){const{product:n,user:o}=t.payload;if(!e.favourites.some((e=>e._id===n._id))){const t=Object.assign({},n,{likes:n.likes+1,favourites:[o,...n.favourites]});e.favourites.unshift(t),e.modifiedProducts.unshift(t)}e.addLike=e.addLike+1},removeLocalFavourite(e,t){const{product:n,user:o}=t.payload,r=Object.assign({},n,{likes:n.likes-1,favourites:n.favourites.filter((e=>e._id!==o._id))}),i=e.favourites.filter((e=>e._id!==n._id)),a=e.modifiedProducts.map((e=>e._id===n._id?r:e));e.favourites=i,e.modifiedProducts=a,e.addLike=e.addLike-1},addModifiedProduct(e,t){const n=t.payload;if(e.modifiedProducts.some((e=>e._id===n._id))){const t=e.modifiedProducts.map((e=>e._id===n._id?n:e));e.modifiedProducts=t}else{const t=[n,e.modifiedProducts];e.modifiedProducts=t}},setLikedIcon(e,t){e.liked=t.payload},setIsLoading(e,t){e.isLoading=t.payload},setDisableLikeButton(e,t){e.disableLikeButton=t.payload},setPage(e,t){e.page=t.payload},setHasMore(e,t){e.hasMore=t.payload},addFavouriteContext(e,t){const{item:n,bool:o}=t.payload,r=new Set(e.favourites.map((e=>e._id))).has(n._id);o&&!r?e.favourites=[n,...e.favourites]:!o&&r&&(e.favourites=e.favourites.filter((e=>e._id!==n._id)))},updateLocalFavourites(e,t){const{item:n,isAdding:o}=t.payload,r=e.favourites.findIndex((e=>e._id===n._id));o?-1===r&&e.favourites.push(n):-1!==r&&e.favourites.splice(r,1)}},extraReducers:e=>{e.addCase(je.pending,(e=>{e.isLoading=!0})).addCase(je.fulfilled,((e,t)=>{e.isLoading=!1})).addCase(je.rejected,((e,t)=>{e.isLoading=!1,e.error=t.payload})).addCase(Ce.pending,(e=>{e.isLoading=!0})).addCase(Ce.fulfilled,((e,t)=>{e.isLoading=!1;const n=t.payload.datas;n.length>0?(e.favourites=[...e.favourites,...n[0].productDetails],e.modifiedProducts=[...e.favourites,...n[0].productDetails],e.page+=1):e.hasMore=!1})).addCase(Ce.rejected,((e,t)=>{e.isLoading=!1,e.error=t.payload}))}}),{setLikedIcon:we,setIsLoading:Se,setDisableLikeButton:ve,setPage:Ie,setHasMore:Te,addFavouriteContext:ke,updateLocalFavourites:Ee,addLocalFavourite:Pe,removeLocalFavourite:Be,addModifiedProduct:Fe}=be.actions;be.reducer;n(5680);const ze=e=>{const{text:t,color:n,backgroundColor:r,onPress:i,styles:a,disabled:s}=e,l=o.default.create({bg:{backgroundColor:r||I},color:{color:n||E}});return(0,ne.jsx)(u.default,{style:[{justifyContent:"center",alignItems:"center"},a.pressable,l.bg],onPress:i,disabled:s,children:(0,ne.jsx)(c.default,{style:[a.text,l.color],children:t})})},Oe=e=>{const{onRequestClose:t,isLoading:n,size:o,color:r,message:i}=e;return(0,ne.jsx)(le.default,{visible:n,transparent:!0,onRequestClose:()=>t(!0),children:(0,ne.jsx)(d.default,{style:[ge.modalActivityIndicator.modalContainer],children:(0,ne.jsxs)(d.default,{style:[ge.modalActivityIndicator.modalContent],children:[(0,ne.jsx)(c.default,{style:[R.text,{fontWeight:"bold"}],children:i}),(0,ne.jsx)(se.default,{color:r,size:o})]})})})},Ae=(0,s.createContext)(),De=({children:e})=>{const[t,n]=(0,s.useState)([]),[o,r]=(0,s.useState)([]),[i,a]=(0,s.useState)(!1),l={accounters:o,accountancies:t,isLoading:i},d={setAccounters:r,setIsLoading:a},c={deleteAccountancyRecord:async e=>{try{const t=await fetch(`${ee}/api/datas/accountancy/remove/${encodeURIComponent(e._id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!t.ok){const e=await t.text();throw new Error(e)}return(await t.json()).datas}catch(t){return console.error("Erreur lors de la requ\xeate:",t),!1}},fetchAccountancies:async e=>{try{console.log(e),a(!0);const t=await fetch(`${ee}/api/datas/accountancy/accountancies/${encodeURIComponent(e._id)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t)throw new Error("Erreur reseau "+await t.text());const o=await t.json();return n(o.datas),o.datas}catch(t){return console.log(t),[]}finally{a(!1)}},getSearchedAccountancies:async e=>{try{a(!0);const t=await fetch(`${ee}/api/datas/accountancy/accountancies/search?date=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t)throw new Error("Erreur reseau "+await t.text());const o=await t.json();return n(o.datas),o.datas}catch(t){return console.log(t),[]}finally{a(!1)}},addUserDailyAccountancy:async(e,t)=>{try{const n=await fetch(`${ee}/api/datas/accountancy/add/${encodeURIComponent(e._id)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const e=await n.text();throw new Error(e)}return(await n.json()).datas}catch(n){return console.error("Erreur lors de la requ\xeate:",n),!1}},fetchAccounters:async()=>{try{a(!0);const e=await fetch(`${ee}/api/datas/accountancy/accounters`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.text();throw new Error(`Error: ${t}`)}const t=await e.json();return t.success?(r(t.datas),t.datas):void console.error("Error fetching users:",t.message)}catch(e){console.error("Fetch error:",e.message)}finally{a(!1)}},updateAccounterBalance:async(e,t)=>{try{const n=await fetch(`${ee}/api/datas/accountancy//updateBalance/${encodeURIComponent(e._id)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const e=await n.text();throw new Error(e)}return(await n.json()).datas}catch(n){return console.error("Erreur lors de la requ\xeate:",n),!1}}};return(0,ne.jsx)(Ae.Provider,{value:Object.assign({},l,d,c),children:e})},Le=e=>{const t=(0,q.useNavigation)(),{fetchAccounters:n,fetchAccountancies:o,accounters:r,accountancies:i,isLoading:a,setIsLoading:l}=(0,s.useContext)(Ae);return(0,s.useEffect)((()=>{(async()=>{await n()})()}),[]),(0,ne.jsx)(d.default,{style:[Re.container],children:(0,ne.jsxs)(d.default,{style:[Re.infoContainer],children:[(0,ne.jsx)(ae.default,{data:r,renderItem:({item:e})=>(0,ne.jsx)(u.default,{style:[Re.item],onPress:()=>{(e=>{t.navigate("ViewAccountanciesDetails",{accounter:e})})(e)},children:(0,ne.jsx)(c.default,{style:[R.text,Re.itemText],children:e.email.split("@")[0]})}),keyExtractor:e=>e._id.toString(),ItemSeparatorComponent:e=>(0,ne.jsx)(d.default,{style:{height:5}}),contentContainerStyle:[Re.flatlist],style:[{width:"100%"}],ListEmptyComponent:()=>{}}),(0,ne.jsx)(Oe,{onRequestClose:l,isLoading:a,size:"large",color:m,message:"Chargements des donn\xe9es..."})]})})},Re=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",top:10},top:{flex:1,alignItems:"center"},topTitle:{},infoContainer:Object.assign({},M,{position:"absolute",flex:1,width:"100%"}),contents:{paddingHorizontal:10},flatlist:{justifyContent:"center",width:"100%",height:"100%",paddingHorizontal:10},item:{padding:20,borderWidth:1,borderColor:C,width:"100%",justifyContent:"center",alignItems:"center"},itemText:{},titles:{},titlesText:{}});var _e=n(4249),Ve=n(7903),We=n(1756),Ne=n(6849);const Ue=o.default.create({container:{flexGrow:1,top:0},containers:{},titles:{backgroundColor:O,height:50,flexDirection:"row",alignItems:"center",paddingLeft:20},contents:{backgroundColor:E,flexDirection:"row",alignItems:"center",padding:20,paddingRight:0},titlesText:Object.assign({},R.text,{fontWeight:"bold",fontSize:16}),normalText:Object.assign({},R.text,{fontSize:14,color:w}),imageBox:{width:100,height:100,borderWidth:1,borderColor:b,justifyContent:"center",alignItems:"center"},imageCloseButton:{width:20,height:20,backgroundColor:P,position:"absolute",alignSelf:"flex-end",top:0},bottomPicker:Object.assign({},fe,{position:"absolute",left:0,right:0,bottom:0,padding:20,flexDirection:"row",justifyContent:"space-around",alignItems:"center",paddingHorizontal:20,backgroundColor:O,borderTopWidth:2,borderTopColor:E,zIndex:99}),inputContainer:{borderRadius:0,borderWidth:0,borderBottom:1,padding:0},radioBox:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",width:"100%"},radioContainer:{flexDirection:"row",alignItems:"center"},categoryContainer:{backgroundColor:E,flexDirection:"column",justifyContent:"center",alignItems:"flex-start",padding:0,paddingRight:0,wifth:"100%"},pressableDetails:{padding:15,borderBottomWidth:1,borderColor:C,width:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},addProductSubmitView:{position:"relative",left:0,right:0,bottom:0,width:"100%",height:60},pressable:{padding:20,justifyContent:"center",alignItems:"center",flex:1},text:Object.assign({},R.text,{fontWeight:"bold"}),modalContainer:{flex:1,backgroundColor:F,justifyContent:"center",alignItems:"center"},fullImage:{width:"90%",height:"70%"},closeButton:{marginTop:20,padding:10,backgroundColor:v,borderRadius:5},closeButtonText:{fontSize:16,color:E}}),Me=e=>{const t=(0,q.useNavigation)(),{user:n}=((0,q.useRoute)(),(0,s.useContext)(oe)),{fetchAccounters:o,addUserDailyAccountancy:r,accounters:i,accountancies:a,isLoading:l,setIsLoading:u}=(0,s.useContext)(Ae),[f,p]=(0,s.useState)(!1),[h,g]=(0,s.useState)(0),[x,y]=(0,s.useState)([]),[j,C]=(0,s.useState)(!1),[b,S]=(0,s.useState)({}),[v,I]=(0,s.useState)(null),[T,k]=(0,s.useState)(!1),[P,B]=(0,s.useState)(""),F=e=>e.split("@")[0],z=e=>{const t=F(n.email);let o=[];return"boss"==n.role?o=e.filter((e=>"admin"==F(e.email))):"auto-supplier"==n.role?o=[n]:"admin"==t?o=e.filter((e=>"comptabilite"==F(e.email))):"comptabilite"==t&&(o=e.filter((e=>["kennevarelle9","stessydkbglobal","dorisndokon3"].includes(F(e.email))))),o};return(0,s.useEffect)((()=>{(async()=>{o().then((e=>{console.log(e),B(z(e)[0]?._id)}))})()}),[]),(0,ne.jsx)(d.default,{style:[He.container],children:(0,ne.jsxs)(d.default,{style:[He.infoContainer],children:[(0,ne.jsxs)(d.default,{style:[He.contents],children:[(0,ne.jsx)(d.default,{style:[He.title],children:(0,ne.jsx)(c.default,{style:[He.titleText],children:"Montant"})}),(0,ne.jsx)(d.default,{style:{height:10}}),(0,ne.jsx)(de.Input,{placeholder:"Montant en XAF",value:K(h),onChangeText:e=>{g(K(e))},inputMode:"numeric",multiline:!1,placeholderTextColor:w,inputStyle:[he.inputText],onFocus:()=>C(!0),onBlur:()=>C(!1),underlineColorAndroid:"transparent",containerStyle:[He.inputBox],inputContainerStyle:[he.inputContainer,j&&he.inputContainerFocused,He.inputContainer]})]}),(0,ne.jsx)(d.default,{style:[He.contents],children:(0,ne.jsxs)(d.default,{style:[He.receipient],children:[(0,ne.jsx)(d.default,{style:[He.title],children:(0,ne.jsx)(c.default,{style:[He.titleText],children:"Receipient"})}),(0,ne.jsx)(d.default,{style:{height:10}}),(0,ne.jsx)(We.Picker,{selectedValue:P,style:[He.picker],onValueChange:(e,t)=>B(e),children:z(i).map(((e,t)=>(0,ne.jsx)(We.Picker.Item,{label:e.email,value:e._id},t)))})]})}),"auto-supplier"===n.role&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(d.default,{style:{height:10}}),(0,ne.jsx)(de.Input,{placeholder:"Motif",value:v,onChangeText:e=>{I(e)},multiline:!1,placeholderTextColor:w,inputStyle:[he.inputText],onFocus:()=>k(!0),onBlur:()=>k(!1),underlineColorAndroid:"transparent",containerStyle:[He.inputBox],inputContainerStyle:[he.inputContainer,T&&he.inputContainerFocused,He.inputContainer]})]}),(0,ne.jsx)(d.default,{style:{height:20}}),(0,ne.jsx)(d.default,{style:[Ue.addProductSubmitView,{}],children:(0,ne.jsx)(ze,{text:"Valider",color:E,backgroundColor:m,styles:Ue,onPress:()=>{(async()=>{try{p(!0),S({});const e={reason:v?"auto-supply "+v:"Supply",amount:parseInt(h.split(".").join("")),billNo:"/",supplyTo:P,type:v?"auto-income":"income",date:Y()};if(console.log(e),!await r(n,e))throw new Error("Erreur lors de l'ajout du raport");Z({title:"Alerte",text:"Votre transaction a \xe9t\xe9 effectu\xe9e avec success.",icon:"warning",action:t?.goBack})}catch(e){console.log(e),Z({title:"Erreur",text:"Verifier votre connexion a Internet. Si cela persiste contacter l'admin.",icon:"warning",action:function(){}})}finally{p(!1)}})()}})}),(0,ne.jsx)(Oe,{onRequestClose:p,isLoading:f,size:"large",color:m,message:"Chargements des donn\xe9es..."})]})})},He=o.default.create({container:{flex:1,justifyContent:"center",top:10},infoContainer:Object.assign({},M,{width:"100%"}),contents:{paddingHorizontal:10},inputContainer:{borderRadius:0,borderWidth:0,borderBottom:1,padding:0,left:0,width:"100%"},inputBox:{backgroundColor:E},picker:{padding:10,width:"100%",backgroundColor:E},titleText:{fontWeight:"bold",fontSize:16}}),$e=e=>{const t=(0,q.useNavigation)(),n=(0,q.useRoute)(),{accounter:o}=n.params,{fetchAccounters:r,fetchAccountancies:i,accounters:a,accountancies:l,isLoading:f,setIsLoading:p,getSearchedAccountancies:h,deleteAccountancyRecord:x,updateAccounterBalance:y}=(0,s.useContext)(Ae),{user:j}=(0,s.useContext)(oe),[b,w]=(0,s.useState)(!1),[I,P]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{await i(o)})()}),[b]);const B=e=>e.split("@")[0].slice(0,10),F=async e=>{const t={title:"Alerte",text:"Etes vous sur de vouloir supprimer cette ligne ? L'operation est irreversible. Et de plus cela ne modifiera pas letat actuel de vos caisse.",icon:"warning",action:async function(){(async()=>{try{G(!0),await x(e),Z({title:"Alerte",text:"Record supprime avec succes",icon:"warning",action:function(){}}),w((e=>!e))}catch(t){console.log(t),Z({title:"Erreur",text:"Verifier votre connexion a Internet. Si cela persiste contacter l'admin.",icon:"warning",action:function(){}})}finally{G(!1)}})()},refuseAction:function(){}};Z(t)},z=()=>"comptabilite@dkbglobaltrader.net"===j.email&&!["comptabilite@dkbglobaltrader.net","benjamindzogang@dkbglobaltrader.net","ornelletsotezo@gmail.com"].includes(o.email),L=e=>{const{item:t,index:n}=e,r={title:"Alerte",text:t.reason,icon:"Information",action:null};let i="",a="+";return"income"==t?.type?t?.user._id==o._id?(i=D,a="-"):(i=A,a="+"):"auto-income"==t?.type?(i=k,a="+"):(i=D,a="+"),(0,ne.jsxs)(u.default,{onPress:()=>Z(r),style:[qe.line,{backgroundColor:i}],children:[z()&&(0,ne.jsx)(u.default,{style:[qe.cell],onPress:()=>{F(t)},children:(0,ne.jsx)(c.default,{style:[qe.recordItemText,{color:v,fontWeight:"bold"}],children:"Delete"})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.recordItemText],children:t?.date})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsxs)(c.default,{style:[qe.recordItemText],children:[t?.reason.substring(0,20)," ",t.reason.length>20?"...":"."]})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsxs)(c.default,{style:[qe.recordItemText],children:[a," ",t?.amount]})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.recordItemText],children:"outcome"==t?.type?t?.receivedBy:B(t?.supplyTo.email)})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.recordItemText],children:"income"==t?.type?t?.user._id==o._id?B(t?.supplyTo.email):B(t?.user.email):t?.billNo})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.recordItemText],children:"income"==t?.type?t?.user._id==o._id?t?.cashBalance:t?.supplyCashBalance:t?.cashBalance})})]})},[_,V]=(0,s.useState)("Day"),[W,N]=(0,s.useState)(Y()),[U,M]=(0,s.useState)(!1),[H,G]=(0,s.useState)(!1),[J,K]=(0,s.useState)(!1);return(0,ne.jsx)(Ve.default,{horizontal:!0,contentContainerStyle:[qe.container],children:(0,ne.jsxs)(d.default,{style:[{flex:1}],children:[(0,ne.jsxs)(d.default,{style:[qe.topSearch],children:[(0,ne.jsx)(u.default,{style:[qe.searchButton,{alignItems:"center",backgroundColor:J?v:T}],onPress:()=>{K((e=>!e))},children:(0,ne.jsx)(c.default,{style:[R.text,{color:E,fontWeight:"bold"}],children:J?"Fermer":"Chercher"})}),J&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(d.default,{style:[qe.topElInput,{}],children:(0,ne.jsx)(de.Input,{placeholder:"Date",value:W,onChangeText:e=>{N(e)},inputMode:"text",multiline:!1,readOnly:!1,maxLength:100,placeholderTextColor:C,inputStyle:[he.inputText],onFocus:()=>M(!0),onBlur:()=>M(!1),underlineColorAndroid:"transparent",containerStyle:[qe.containerBox],inputContainerStyle:[he.inputContainer,U&&he.inputContainerFocused,qe.inputContainer]})}),(0,ne.jsx)(d.default,{style:{width:10}}),(0,ne.jsx)(d.default,{style:[qe.topEl,{}],children:(0,ne.jsx)(We.Picker,{selectedValue:_,style:[qe.picker],onValueChange:(e,t)=>V(e),children:["Day","Month"].map(((e,t)=>(0,ne.jsx)(We.Picker.Item,{label:e,value:e},t)))})}),(0,ne.jsx)(d.default,{style:{width:10}}),(0,ne.jsx)(d.default,{style:[qe.topEl,{}],children:(0,ne.jsx)(ze,{text:"Filtrer",color:E,backgroundColor:m,styles:qe,onPress:()=>{(async()=>{try{G(!0);const e="day"===_.toLowerCase()?W:"01/"+W;if(!Q(e))return void me.default.alert("Date Error","Entrez une date valide, au format JJ pour day et JJ/MM pour month");await h(W)}catch(e){console.log(e),me.default.alert("Error","Verifier votre connexion a Internet. Si cela persiste contacter l'admin.")}finally{G(!1)}})()}})})]})]}),(0,ne.jsx)(d.default,{style:{height:5}}),(0,ne.jsxs)(d.default,{style:[{flexDirection:"row",justifyContent:"space-around",width:"100%"}],children:[(0,ne.jsxs)(d.default,{style:[{flexDirection:"row"}],children:[(0,ne.jsx)(u.default,{children:(0,ne.jsx)(c.default,{style:[R.text,$.menuItemText,{fontSize:20}],children:"Balance : "})}),(0,ne.jsx)(u.default,{children:(0,ne.jsxs)(c.default,{style:[R.text,$.menuItemText,{fontSize:20,fontWeight:"bold",color:o.cashBalance<0?"red":T}],children:[o.cashBalance," XAF"]})})]}),(0,ne.jsx)(d.default,{style:{width:10}}),["admin","boss"].includes(j.role)&&(0,ne.jsxs)(d.default,{style:[qe],children:[(0,ne.jsx)(u.default,{onPress:()=>{P(!0)},children:(0,ne.jsx)(c.default,{style:[R.text,$.menuItemText,{fontSize:20}],children:"Cr\xe9diter"})}),(0,ne.jsx)((({visible:e,setVisible:n})=>{const[r,i]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[c,f]=(0,s.useState)(""),[p,h]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1);return(0,ne.jsx)(Ne.default,{isVisible:e,onBackdropPress:()=>n(!1),backdropOpacity:.5,style:{justifyContent:"center",alignItems:"center"},children:(0,ne.jsxs)(d.default,{style:[qe.modalContainer],children:[(0,ne.jsx)(de.Input,{placeholder:"Amount",value:a,onChangeText:e=>l(e),inputMode:"numeric",multiline:!1,maxLength:100,placeholderTextColor:C,inputStyle:[he.inputText],onFocus:()=>h(!0),onBlur:()=>h(!1),underlineColorAndroid:"transparent",containerStyle:[qe.containerBox],inputContainerStyle:[he.inputContainer,p&&he.inputContainerFocused,qe.inputContainer]}),(0,ne.jsx)(de.Input,{placeholder:"Votre Mot De Passe",onChangeText:e=>{f(e)},multiline:!1,numberOfLines:1,placeholderTextColor:O,inputStyle:[he.inputText],onFocus:()=>x(!0),onBlur:()=>x(!1),underlineColorAndroid:"transparent",containerStyle:[qe.containerBox],inputContainerStyle:[he.inputContainer,g&&he.inputContainerFocused,qe.inputContainer],rightIcon:j?(0,ne.jsx)(u.default,{onPress:()=>b(!1),children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-off-outline",size:24,color:S})}):(0,ne.jsx)(u.default,{onPress:()=>b(!0),children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-outline",size:24,color:m})}),value:c,secureTextEntry:!j}),(0,ne.jsx)(_e.default,{title:"Envoyer",onPress:async()=>{try{if(G(!0),"dkbadmin"!=c){return void Z({title:"Alerte",text:"Mot de passe Admin incorrect",icon:"Error",action:function(){}})}const e={amount:parseInt(a.split(".").join(""))},n=await y(o,e);if(console.log(e),!n)throw new Error("Erreur lors de l'ajout du raport");Z({title:"Alerte",text:"Votre transaction a \xe9t\xe9 effectu\xe9e avec success.",icon:"warning",action:function(){t.navigate("Home")}})}catch(e){console.log(e);Z({title:"Erreur",text:"Verifier votre connexion a Internet. Si cela persiste contacter l'admin.",icon:"warning",action:function(){}})}finally{G(!1),n(!1)}}})]})})}),{visible:I,setVisible:P})]})]}),(0,ne.jsx)(d.default,{style:{height:10}}),(0,ne.jsx)(ae.default,{data:l,renderItem:({item:e,index:t})=>(0,ne.jsx)(L,{item:e,index:t}),keyExtractor:e=>e._id.toString(),ItemSeparatorComponent:e=>(0,ne.jsx)(d.default,{style:{height:5}}),contentContainerStyle:[qe.flatlist],ListHeaderComponent:({item:e})=>(0,ne.jsxs)(d.default,{style:[qe.line],children:[z()&&!(j.email==o.email&&"comptabilite@dkbglobaltrader.net"==o.email)&&(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.titleText],children:"Action"})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.titleText],children:"Date"})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.titleText],children:"Reason"})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.titleText],children:"Amount"})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.titleText],children:"Received By"})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.titleText],children:"Bill"})}),(0,ne.jsx)(d.default,{style:[qe.cell],children:(0,ne.jsx)(c.default,{style:[qe.titleText],children:"Balance"})})]}),ListFooterComponent:()=>{},ListEmptyComponent:()=>(0,ne.jsx)(d.default,{style:[{width:g,justifyContent:"center",alignItems:"center"}],children:(0,ne.jsx)(c.default,{style:[qe.titleText],children:"Pas de donnees"})})}),(0,ne.jsx)(d.default,{style:{hieght:10}}),(0,ne.jsx)(Oe,{onRequestClose:G,isLoading:H,size:"large",color:m,message:"Chargements des donn\xe9es..."})]})})},qe=o.default.create({container:{flexGrow:1},searchButton:{padding:10},topSearch:{width:g,backgroundColor:E},topSearchEl:{},inputContainer:{width:"100%",borderRadius:0,borderWidth:0,borderBottom:1,padding:0},containerBox:{backgroundColor:E},picker:{padding:10},line:{flexDirection:"row",justifyContent:"space-between"},record:{flexDirection:"row",justifyContent:"space-between"},cell:{width:200,height:30,borderRightWidth:1,borderColor:E,justifyContent:"center",alignItems:"center"},subTitle:{},subTitleText:{},titleText:{color:w,fontWeight:"bold",fontSize:15},recordItemText:{color:w},pressable:{padding:20},modalContainer:{width:"80%",backgroundColor:"white",padding:20,borderRadius:10},input:{width:"80%",backgroundColor:"white",padding:10,marginBottom:10,borderRadius:5}}),Ge=e=>{const t=(0,q.useNavigation)(),{user:n}=((0,q.useRoute)(),(0,s.useContext)(oe)),{addUserDailyAccountancy:o}=(0,s.useContext)(Ae),[r,i]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[u,f]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[g,x]=(0,s.useState)(""),[y,j]=(0,s.useState)(Y()),[b,w]=(0,s.useState)(!1),[S,v]=(0,s.useState)(!1),[I,T]=(0,s.useState)(!1),[k,P]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),[z,A]=(0,s.useState)(!1),[D,L]=(0,s.useState)({}),[R,_]=(0,s.useState)(!1);return(0,ne.jsxs)(d.default,{children:[(0,ne.jsxs)(Ve.default,{contentContainerStyle:[Ue.container,{flexGrow:1}],children:[(0,ne.jsxs)(d.default,{style:[Ue.containers],children:[(0,ne.jsx)(d.default,{style:[Ue.titles],children:(0,ne.jsx)(c.default,{style:[Ue.titlesText],children:"Motif De Retrait : "})}),(0,ne.jsxs)(d.default,{style:[Ue.contents],children:[(0,ne.jsx)(d.default,{style:{width:10}}),(0,ne.jsxs)(d.default,{children:[(0,ne.jsx)(de.Input,{placeholder:"EX : Give a reason",value:r,onChangeText:e=>{i(e)},inputMode:"text",multiline:!0,placeholderTextColor:C,inputStyle:[he.inputText],onFocus:()=>w(!0),onBlur:()=>w(!1),underlineColorAndroid:"transparent",containerStyle:[he.containerBox],inputContainerStyle:[he.inputContainer,b&&he.inputContainerFocused,Ue.inputContainer]}),D.name&&(0,ne.jsx)(c.default,{style:[V.text],children:D.checkoutReason})]})]})]}),(0,ne.jsxs)(d.default,{style:[Ue.containers],children:[(0,ne.jsx)(d.default,{style:[Ue.titles],children:(0,ne.jsx)(c.default,{style:[Ue.titlesText],children:"Montant : "})}),(0,ne.jsxs)(d.default,{style:[Ue.contents],children:[(0,ne.jsx)(d.default,{style:{width:10}}),(0,ne.jsxs)(d.default,{children:[(0,ne.jsx)(de.Input,{placeholder:"EX : Amount",value:a,onChangeText:e=>{l(K(e))},inputMode:"text",multiline:!1,maxLength:100,placeholderTextColor:C,inputStyle:[he.inputText],onFocus:()=>v(!0),onBlur:()=>v(!1),underlineColorAndroid:"transparent",containerStyle:[he.containerBox],inputContainerStyle:[he.inputContainer,S&&he.inputContainerFocused,Ue.inputContainer]}),D.name&&(0,ne.jsx)(c.default,{style:[V.text],children:D.amount})]})]})]}),(0,ne.jsxs)(d.default,{style:[Ue.containers],children:[(0,ne.jsx)(d.default,{style:[Ue.titles],children:(0,ne.jsx)(c.default,{style:[Ue.titlesText],children:"Numero De Facture "})}),(0,ne.jsxs)(d.default,{style:[Ue.contents],children:[(0,ne.jsx)(d.default,{style:{width:10}}),(0,ne.jsxs)(d.default,{children:[(0,ne.jsx)(de.Input,{placeholder:"EX : Bill No",value:u,onChangeText:e=>{f(e)},inputMode:"text",multiline:!1,maxLength:100,placeholderTextColor:C,inputStyle:[he.inputText],onFocus:()=>T(!0),onBlur:()=>T(!1),underlineColorAndroid:"transparent",containerStyle:[he.containerBox],inputContainerStyle:[he.inputContainer,I&&he.inputContainerFocused,Ue.inputContainer]}),D.name&&(0,ne.jsx)(c.default,{style:[V.text],children:D.billNo})]})]})]}),(0,ne.jsxs)(d.default,{style:[Ue.containers],children:[(0,ne.jsx)(d.default,{style:[Ue.titles],children:(0,ne.jsx)(c.default,{style:[Ue.titlesText],children:"Recu Par : "})}),(0,ne.jsxs)(d.default,{style:[Ue.contents],children:[(0,ne.jsx)(d.default,{style:{width:10}}),(0,ne.jsxs)(d.default,{children:[(0,ne.jsx)(de.Input,{placeholder:"Name",value:p,onChangeText:e=>{h(e)},inputMode:"text",readOnly:!1,multiline:!1,maxLength:100,placeholderTextColor:C,inputStyle:[he.inputText],onFocus:()=>P(!0),onBlur:()=>P(!1),underlineColorAndroid:"transparent",containerStyle:[he.containerBox],inputContainerStyle:[he.inputContainer,k&&he.inputContainerFocused,Ue.inputContainer]}),D.name&&(0,ne.jsx)(c.default,{style:[V.text],children:D.receivedBy})]})]})]}),(0,ne.jsxs)(d.default,{style:[Ue.containers],children:[(0,ne.jsx)(d.default,{style:[Ue.titles],children:(0,ne.jsx)(c.default,{style:[Ue.titlesText],children:"Date : "})}),(0,ne.jsxs)(d.default,{style:[Ue.contents],children:[(0,ne.jsx)(d.default,{style:{width:10}}),(0,ne.jsxs)(d.default,{children:[(0,ne.jsx)(de.Input,{placeholder:"Date de la transaction",value:y,onChangeText:e=>{j(e)},inputMode:"text",multiline:!1,readOnly:!1,maxLength:100,placeholderTextColor:C,inputStyle:[he.inputText],onFocus:()=>A(!0),onBlur:()=>A(!1),underlineColorAndroid:"transparent",containerStyle:[he.containerBox],inputContainerStyle:[he.inputContainer,z&&he.inputContainerFocused,Ue.inputContainer,{backgroundColor:O}]}),D.date&&(0,ne.jsx)(c.default,{style:[V.text],children:D.date})]})]})]})]}),(0,ne.jsx)(d.default,{style:{hieght:10}}),(0,ne.jsx)(d.default,{style:[Ue.addProductSubmitView,{}],children:(0,ne.jsx)(ze,{text:"Soumettre",color:E,backgroundColor:m,styles:Ue,onPress:()=>{(async()=>{try{if(_(!0),L({}),!Q(y))return void me.default.alert("Date Error","Entrez une date valide, au format JJ/MM/AA");const e={receivedBy:p,reason:r,amount:parseInt(a.split(".").join("")),billNo:u,type:"outcome",date:y};await o(n,e),Z({title:"Alerte",text:"Votre transaction a \xe9t\xe9 effectu\xe9e avec success.",icon:"warning",action:t?.goBack})}catch(e){console.log(e),Z({title:"Erreur",text:"Verifier votre connexion a Internet. Si cela persiste contacter l'admin.",icon:"warning",action:function(){}})}finally{_(!1)}})()}})}),(0,ne.jsx)(Oe,{onRequestClose:_,isLoading:R,size:"large",color:m,message:"Chargements des donn\xe9es..."})]})};var Je=n(2497),Ke=n(1930),Xe=n(8625),Ye=n(646);const Qe=Ye.object().shape({email:Ye.string().matches(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"L'adresse email n'est pas valide").required("L'adresse email est requise"),password:Ye.string().min(7,"Le mot de passe doit contenir au moins 7 caract\xe8res").required("Le mot de passe est requis"),username:Ye.string().min(3,"Le nom d'utilisateur doit contenir au moins 3 caract\xe8res").required("Le nom d'utilisateur est requis")});n(1704);const Ze=e=>{const{}=e,t=(0,q.useRoute)(),n=(0,q.useNavigation)(),{checkEmail:o,checkPassword:r,checkUsername:i,user:a,setUser:l,updateUser:f,setIsAuthenticated:p,signupUserWithEmailAndPassword:h,loginUserWithEmailAndPassword:g}=(0,s.useContext)(oe),[x,y]=s.useState(t?.params?.page||"login"),[j,C]=(0,s.useState)("cashier"),[b,w]=(0,s.useState)(""),[I,k]=(0,s.useState)(""),[P,F]=(0,s.useState)(""),[z,A]=(0,s.useState)(""),[D,L]=(0,s.useState)(""),[_,W]=(0,s.useState)(!1),[N,U]=(0,s.useState)(!1),[M,$]=(0,s.useState)(!1),[G,J]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(!1),[te,re]=(0,s.useState)(!1),[ie,ae]=(0,s.useState)(!1),[se,le]=(0,s.useState)(""),[ce,ue]=(0,s.useState)(""),[fe,pe]=(0,s.useState)(""),[he,ge]=(0,s.useState)({});return(0,ne.jsxs)(d.default,{style:[H.container],children:[(0,ne.jsx)(Je.KeyboardAwareScrollView,{resetScrollToCoords:{x:0,y:0},contentContainerStyle:{flexGrow:1,justifyContent:"center"},scrollEnabled:!0,children:(0,ne.jsxs)(Ve.default,{contentContainerStyle:[H.infoContainer,{}],children:[(0,ne.jsx)(d.default,{style:[H.registerOrLogin],children:(0,ne.jsx)(Ke.default.Group,{onValueChange:e=>y(e),value:x,children:(0,ne.jsxs)(d.default,{style:[H.credentialGroup],children:[["boss","admin"].includes(a?.role)&&(0,ne.jsxs)(d.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:10},children:[(0,ne.jsx)(Ke.default,{value:"register"}),(0,ne.jsx)(c.default,{children:"Register"})]}),(0,ne.jsxs)(d.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:10},children:[(0,ne.jsx)(Ke.default,{value:"login"}),(0,ne.jsx)(c.default,{children:"Login"})]})]})})}),(0,ne.jsxs)(d.default,{style:[H.credentialContainers],children:[(0,ne.jsx)(de.Input,{placeholder:"Votre Email",onChangeText:e=>{w(e)},multiline:!1,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input],onFocus:()=>U(!0),onBlur:()=>U(!1),underlineColorAndroid:"transparent",inputContainerStyle:[H.inputContainer,N&&H.inputFocused],leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"email",type:"entypo",size:24,color:N?m:B})}),rightIcon:"true"===se?(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"checkmark-circle-outline",type:"ionicon",size:24,color:T})}):"false"===se&&(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"close-circle-outline",type:"ionicon",size:24,color:v})}),value:b}),he.email&&(0,ne.jsx)(c.default,{style:[V.text],children:he.email})]}),(0,ne.jsx)(d.default,{style:{height:10}}),(0,ne.jsxs)(d.default,{style:[H.credentialContainers],children:[(0,ne.jsx)(de.Input,{placeholder:"Votre Mot De Passe",onChangeText:e=>{F(e)},multiline:!1,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input],onFocus:()=>$(!0),onBlur:()=>$(!1),underlineColorAndroid:"transparent",inputContainerStyle:[{borderBottomWidth:1},M&&H.inputFocused],leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"lock-closed-sharp",type:"ionicon",size:24,color:M?m:B})}),rightIcon:te?(0,ne.jsx)(u.default,{onPress:()=>{re(!1)},children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-off-outline",size:24,color:S})}):(0,ne.jsx)(u.default,{onPress:()=>{re(!0)},children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-outline",size:24,color:m})}),value:P,secureTextEntry:!te}),he.password&&(0,ne.jsx)(c.default,{style:[V.text],children:he.password})]}),"register"==x&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(d.default,{style:[H.registerOrLogin],children:(0,ne.jsx)(Ke.default.Group,{onValueChange:e=>C(e),value:j,children:(0,ne.jsxs)(d.default,{style:[H.credentialGroup],children:[(0,ne.jsxs)(d.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:10},children:[(0,ne.jsx)(Ke.default,{value:"admin"}),(0,ne.jsx)(c.default,{children:"Admin"})]}),(0,ne.jsxs)(d.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:10},children:[(0,ne.jsx)(Ke.default,{value:"supplier"}),(0,ne.jsx)(c.default,{children:"Supplier"})]}),(0,ne.jsxs)(d.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:10},children:[(0,ne.jsx)(Ke.default,{value:"visualizer"}),(0,ne.jsx)(c.default,{children:"Visualiser"})]}),(0,ne.jsxs)(d.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:10},children:[(0,ne.jsx)(Ke.default,{value:"cashier"}),(0,ne.jsx)(c.default,{children:"Cashier"})]}),(0,ne.jsxs)(d.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:10},children:[(0,ne.jsx)(Ke.default,{value:"auto-supplier"}),(0,ne.jsx)(c.default,{children:"Auto Supplier"})]})]})})}),(0,ne.jsxs)(d.default,{style:[H.credentialContainers],children:[(0,ne.jsx)(de.Input,{placeholder:"Location - Ex : douala/logpom",onChangeText:e=>{L(e)},multiline:!1,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input],onFocus:()=>ee(!0),onBlur:()=>ee(!1),underlineColorAndroid:"transparent",inputContainerStyle:[H.inputContainer,Q&&H.inputFocused],leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"email",type:"entypo",size:24,color:N?m:B})}),value:D}),he.location&&(0,ne.jsx)(c.default,{style:[V.text],children:he.location})]}),(0,ne.jsx)(d.default,{style:{height:10}}),(0,ne.jsxs)(d.default,{style:[H.credentialContainers],children:[(0,ne.jsx)(de.Input,{placeholder:"Votre Mot De Passe",onChangeText:e=>{A(e)},multiline:!1,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input],onFocus:()=>Y(!0),onBlur:()=>Y(!1),underlineColorAndroid:"transparent",inputContainerStyle:[{borderBottomWidth:1},K&&H.inputFocused],leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"lock-closed-sharp",type:"ionicon",size:24,color:K?m:B})}),rightIcon:ie?(0,ne.jsx)(u.default,{onPress:()=>{ae(!1)},children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-off-outline",size:24,color:S})}):(0,ne.jsx)(u.default,{onPress:()=>{ae(!0)},children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-outline",size:24,color:m})}),value:z,secureTextEntry:!ie}),he.password&&(0,ne.jsx)(c.default,{style:[V.text],children:he.password})]})]}),(0,ne.jsx)(u.default,{style:[H.forgotBox],onPress:()=>{n.navigate("ResetPassword")},children:(0,ne.jsx)(c.default,{style:[R.text,H.forgotText],children:"Mot de passe oubli\xe9 ?"})})]})}),(0,ne.jsx)(ze,{text:"Valider",onPress:()=>{"login"===x?(async(e,t,o)=>{try{let r;if(W(!0),new FormData,r=await g(e,t,o),!r){const e=new Error("Utilisateur non trouv\xe9");throw e.code="auth/user-not-found",e}return void n.replace("Home")}catch(r){console.log(r);const e={title:"Erreur",text:"Verifier votre connexion a Internet. Si cela persiste contacter l'admin.",icon:"warning",action:function(){}};return r.code?void Z(Object.assign({},e,{text:X(r.code)+"\nVerifiez votre connexion a Internet"})):void Z(e)}finally{W(!1)}})(b,I,P):(async(e,t,o)=>{try{W(!0);const r={email:e,password:o,username:e.split(".")[0],adminPassword:z};await Qe.validate(r,{abortEarly:!1}),h(e,t,o,z,j,D).then((async()=>{Z({title:"Alert",text:"Nouveau membre enregistre avec succes",icon:"warning",action:n?.goBack})}))}catch(r){if(console.log(r),r instanceof Ye.ValidationError){const e={};r.inner.forEach((t=>{e[t.path]=t.message})),ge(e)}else{const e={title:"Erreur",text:"Verifier votre connexion a Internet. Si cela persiste contacter l'admin.",icon:"warning",action:function(){}};if(r.code)return void Z(Object.assign({},e,{text:X(r.code)+"\nVerifiez votre connexion a Internet"}));Z(e)}}finally{W(!1)}})(b,I,P)},color:E,backgroundColor:m,styles:{pressable:H.pressable,text:H.text}}),(0,ne.jsx)(Oe,{onRequestClose:W,isLoading:_,size:"large",color:m,message:"V\xe9rification des donn\xe9ees..."})]})},et=e=>{const{}=e,t=((0,q.useRoute)(),(0,q.useNavigation)()),[n,o]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[c,f]=(0,s.useState)(!1);return(0,ne.jsxs)(d.default,{style:[{flex:1}],children:[(0,ne.jsx)(_e.default,{title:"Login",onPress:()=>{t.navigate("UserLogin")}}),(0,ne.jsxs)(d.default,{children:[(0,ne.jsx)(de.Input,{placeholder:"Posez une question",onChangeText:e=>{o(e)},multiline:!0,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input,c&&H.inputFocused],onFocus:()=>f(!0),onBlur:()=>f(!1),underlineColorAndroid:"transparent",inputContainerStyle:{borderBottomWidth:c?0:1},leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"send-sharp",type:"ionicon",size:24,color:m})}),value:n}),(0,ne.jsx)(d.default,{style:[H.credentialContainers],children:(0,ne.jsx)(de.Input,{placeholder:"Nom De Votre Boutique",onChangeText:e=>{i(e)},multiline:!1,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input],onFocus:()=>setIsUsernameFocused(!0),onBlur:()=>setIsUsernameFocused(!1),underlineColorAndroid:"transparent",inputContainerStyle:[{borderBottomWidth:1},isUsernameFocused&&H.inputFocused],leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"basket-outline",type:"ionicon",size:24,color:m})}),rightIcon:"true"===isUsernameCorrect?(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"checkmark-circle-outline",type:"ionicon",size:24,color:T})}):"false"===isUsernameCorrect&&(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"close-circle-outline",type:"ionicon",size:24,color:v})}),value:r})}),(0,ne.jsx)(ze,{text:"Valider",color:E,backgroundColor:m,styles:{pressable:H.pressable,text:H.text}})]}),(0,ne.jsx)(_e.default,{title:"Login",onPress:()=>{t.navigate("UserLogin")}})]})},tt=e=>{const{}=e,t=((0,q.useRoute)(),(0,q.useNavigation)()),{checkEmail:n,checkPassword:o,checkUsername:r,user:i,setUser:a,getUser:l,updateUser:f,setIsAuthenticated:p,loginUserWithEmailAndPassword:h}=(0,s.useContext)(oe),[g,x]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[C,b]=(0,s.useState)(""),[w,I]=(0,s.useState)(""),[k,P]=(0,s.useState)(""),[F,z]=(0,s.useState)(!1),[A,D]=(0,s.useState)(!1),[L,R]=(0,s.useState)(!1),[_,W]=(0,s.useState)(!1),[N,U]=(0,s.useState)(!1),[M,$]=(0,s.useState)(!1),[G,J]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(""),[Q,Z]=(0,s.useState)(""),[ee,te]=(0,s.useState)(""),[re,ie]=(0,s.useState)(!1),[ae,se]=(0,s.useState)({});return(0,ne.jsxs)(d.default,{style:[{flex:1}],children:[(0,ne.jsxs)(d.default,{style:[H.infoContainer],children:[(0,ne.jsxs)(d.default,{style:[H.credentialContainers],children:[(0,ne.jsx)(de.Input,{placeholder:"Votre Email",onChangeText:e=>{x(e)},multiline:!1,readOnly:re,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input],onFocus:()=>D(!0),onBlur:()=>D(!1),underlineColorAndroid:"transparent",inputContainerStyle:[H.inputContainer,A&&H.inputFocused],leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"email",type:"entypo",size:24,color:A?m:B})}),rightIcon:"true"===K?(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"checkmark-circle-outline",type:"ionicon",size:24,color:T})}):"false"===K&&(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"close-circle-outline",type:"ionicon",size:24,color:v})}),value:g}),ae.email&&(0,ne.jsx)(c.default,{style:[V.text],children:ae.email})]}),re&&(0,ne.jsxs)(d.default,{children:[(0,ne.jsx)(d.default,{style:[H.credentialContainers],children:(0,ne.jsx)(de.Input,{placeholder:"Votre Mot De Passe",onChangeText:e=>{I(e)},multiline:!1,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input],onFocus:()=>R(!0),onBlur:()=>R(!1),underlineColorAndroid:"transparent",inputContainerStyle:[{borderBottomWidth:1},L&&H.inputFocused],leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"key-outline",type:"ionicon",size:24,color:m})}),rightIcon:M?(0,ne.jsx)(u.default,{onPress:()=>{$(!1)},children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-off-outline",size:24,color:S})}):(0,ne.jsx)(u.default,{onPress:()=>{$(!0)},children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-outline",size:24,color:m})}),value:w,secureTextEntry:!M})}),(0,ne.jsxs)(d.default,{style:[H.credentialContainers],children:[(0,ne.jsx)(de.Input,{placeholder:"Votre Mot De Passe",onChangeText:e=>{P(e)},multiline:!1,numberOfLines:1,placeholderTextColor:O,inputStyle:[H.input],onFocus:()=>W(!0),onBlur:()=>W(!1),underlineColorAndroid:"transparent",inputContainerStyle:[{borderBottomWidth:1},_&&H.inputFocused],leftIcon:(0,ne.jsx)(u.default,{onPress:()=>{},children:(0,ne.jsx)(de.Icon,{name:"key-outline",type:"ionicon",size:24,color:m})}),rightIcon:G?(0,ne.jsx)(u.default,{onPress:()=>{J(!1)},children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-off-outline",size:24,color:S})}):(0,ne.jsx)(u.default,{onPress:()=>{J(!0)},children:(0,ne.jsx)(de.Icon,{type:"ionicon",name:"eye-outline",size:24,color:m})}),value:k,secureTextEntry:!G}),ae.password&&(0,ne.jsx)(c.default,{style:[V.text],children:ae.password})]})]}),(0,ne.jsx)(d.default,{style:{height:6}}),(0,ne.jsx)(ze,{text:"Valider",onPress:()=>{(async e=>{try{z(!0),se({}),await l(e)||me.default.alert("Error","Email non trouv\xe9e");const n=new FormData;if(n.append("password",1e4*Math.random()),!await f(e,n)){const e=new Error("Utilisateur non trouv\xe9");throw e.code="auth/user-not-found",e}await(0,Xe.default)().sendPasswordResetEmail(e),me.default.alert("Password reset","Vous allez recevoir un email pour enregistrer votre nouveau mot de passe. Si vous ne le trouvez pas, regardez vos spams.",[{text:"OK",onPress:()=>t.navigate("UserLogin")}],{cancelable:!0})}catch(n){if(n instanceof Ye.ValidationError){const e={};n.inner.forEach((t=>{e[t.path]=t.message})),console.log(e),se(e)}else{if(n.code)return void me.default.alert("Erreur",X(n.code));me.default.alert("Error","Une erreur est sruvenue lors de la verificaiton de vos informations. V\xe9rifiez les donn\xe9es fournies.")}console.log(n)}finally{z(!1)}})(g)},color:E,backgroundColor:m,styles:{pressable:H.pressable,text:H.text}})]}),(0,ne.jsx)(Oe,{onRequestClose:z,isLoading:F,size:"large",color:m,message:"Envoie de l'email de reinitialisation en cours..."})]})},nt=e=>{(0,q.useRoute)();const t=(0,q.useNavigation)(),[n,o]=(0,s.useState)(!0),{checkEmail:r,checkPassword:i,checkUsername:a,user:l,setUser:c,isAuthenticated:u,setIsAuthenticated:f,loginUserWithEmailAndPassword:p}=(0,s.useContext)(oe);return(0,s.useEffect)((()=>{(async()=>{try{o(!0);if(await te.getItemAsync("authToken")){const e=JSON.parse(await te.getItemAsync("user"));return void p(e.email,e.username,e.password).then((async e=>{if(!e)throw new Error("Nous n'avons pas pu vous connecter automatiquement.");t.replace("Home")})).catch((e=>{console.log("TOKEN"),t.replace("UserLogin")}))}t.replace("UserLogin")}catch(e){console.log(e),console.log("NOT TOKEN"),t.replace("UserLogin"),f(!1),o(!1)}})()}),[]),(0,s.useEffect)((()=>{}),[u,t]),(0,ne.jsx)(d.default,{style:[ot.container],children:(0,ne.jsx)(Oe,{onRequestClose:o,isLoading:n,size:"large",color:m,message:"Chargements des donn\xe9es..."})})},ot=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},animation:{width:100,height:100}}),rt=(o.default.create({container:{}}),e=>{const{title:t}=e;(0,q.useRoute)();return(0,ne.jsx)(d.default,{children:(0,ne.jsx)(c.default,{children:t})})}),it=(e,t,n)=>({headerShown:!1,gestureEnabled:!0,cardStyleInterpolator:({current:t,next:n,layouts:o})=>({cardStyle:{transform:[{translateX:t.progress.interpolate({inputRange:[0,1],outputRange:[o.screen.width*e,0],extrapolate:"clamp"})}]}}),transitionSpec:{open:{animation:"timing",config:{duration:t}},close:{animation:"timing",config:{duration:n}}}}),at=(0,l.default)();function st(){return(0,ne.jsx)(a.SafeAreaView,{style:{flex:1},children:(0,ne.jsx)(re,{children:(0,ne.jsx)(De,{children:(0,ne.jsxs)(at.Navigator,{initialRouteName:"LoaderPage",screenOptions:it(.9,250,200),children:[(0,ne.jsx)(at.Screen,{name:"Home",component:ie,options:{title:(0,ne.jsx)(rt,{title:"Home"}),headerShown:!0,tabBarVisible:!1}}),(0,ne.jsx)(at.Screen,{name:"ViewAccountancies",component:Le,options:{title:(0,ne.jsx)(rt,{title:"Accountancies"}),headerShown:!0,tabBarVisible:!1}}),(0,ne.jsx)(at.Screen,{name:"ViewAccountanciesDetails",component:$e,options:{title:(0,ne.jsx)(rt,{title:"Accountancies Details"}),headerShown:!0,tabBarVisible:!1}}),(0,ne.jsx)(at.Screen,{name:"AddAccountancy",component:Ge,options:{title:(0,ne.jsx)(rt,{title:"Add Accountancy"}),headerShown:!0,tabBarVisible:!1}}),(0,ne.jsx)(at.Screen,{name:"SupplyFunds",component:Me,options:{title:(0,ne.jsx)(rt,{title:"Add Supply Funds"}),headerShown:!0,tabBarVisible:!1}}),(0,ne.jsx)(at.Screen,{name:"LoaderPage",component:nt,options:{title:(0,ne.jsx)(rt,{title:"Loader"}),headerShown:!0,tabBarVisible:!1}}),(0,ne.jsx)(at.Screen,{name:"UserLogin",component:Ze,options:{title:(0,ne.jsx)(rt,{title:"Login"}),headerShown:!0,tabBarVisible:!1}}),(0,ne.jsx)(at.Screen,{name:"UserSignup",component:et,options:{title:(0,ne.jsx)(rt,{title:"Sign Up"}),headerShown:!0,tabBarVisible:!1}}),(0,ne.jsx)(at.Screen,{name:"ResetPassword",component:tt,options:{title:(0,ne.jsx)(rt,{title:"Reset Password"}),headerShown:!0,tabBarVisible:!1}})]})})})})}o.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}});function lt(){return(0,ne.jsx)(i.SafeAreaProvider,{children:(0,ne.jsx)(a.SafeAreaView,{style:{flex:1},children:(0,ne.jsx)(r.default,{children:(0,ne.jsx)(st,{})})})})}o.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},6797:(e,t,n)=>{e.exports=n.p+"static/media/logo1.1f0bd22a9e37d86a95ef.jpg"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,(()=>{var e=[];n.O=(t,o,r,i)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,r,i]=e[c],s=!0,l=0;l<o.length;l++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(s=!1,i<a&&(a=i));if(s){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,r,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if("object"===typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&"function"===typeof o.then)return o}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&o;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,n.d(i,a),i}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[a,s,l]=o,d=0;if(a.some((t=>0!==e[t]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)var c=l(n)}for(t&&t(o);d<a.length;d++)i=a[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[122],(()=>n(3931)));o=n.O(o)})();
//# sourceMappingURL=main.78567db6.js.map